

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Building Payette &mdash; Payette 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Payette 1.0 documentation" href="../index.html" />
    <link rel="next" title="Running Payette" href="running_payette.html" />
    <link rel="prev" title="Developer Guide" href="layout.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="running_payette.html" title="Running Payette"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="layout.html" title="Developer Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Payette 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="building-payette">
<h1>Building <em>Payette</em><a class="headerlink" href="#building-payette" title="Permalink to this headline">¶</a></h1>
<p><em>Payette</em> is an object oriented material driver. The majority of the source code
is written in Python and requires no additional building. Many of the material
models, however, are written in Fortran and require a seperate compile step.</p>
<div class="section" id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<p><em>Payette</em> has been built and tested extensively on several versions of linux and
the Apple Mac OSX 10.6 operating systems. It is unknown whether or not <em>Payette</em>
will run on Windows.</p>
</div>
<div class="section" id="required-software">
<h2>Required Software<a class="headerlink" href="#required-software" title="Permalink to this headline">¶</a></h2>
<p><em>Payette</em> requires the following software installed for your platform:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://www.python.org/">Python 2.6</a> or newer</li>
<li><a class="reference external" href="http://www.numpy.org/">NumPy 1.5</a> or newer</li>
<li><a class="reference external" href="http://www.scipy.org/">SciPy 0.1</a> or newer</li>
</ol>
<p>The required software may be obtained in one of several ways:</p>
<ul>
<li><p class="first"><em>Use the</em> <a class="reference external" href="http://http://www.enthought.com/">Enthought</a> <em>Python distribution</em></p>
<p>This option is the simplest and most powerful as Enthought provides a very
complete Python distribution that has a promised &#8220;one click installation&#8221;.
Both free and paid versions are available. The free version provides all of
the prerequisites for <em>Payette</em>.</p>
</li>
<li><p class="first"><em>Install from your systems package manager</em></p>
<p><tt class="docutils literal"><span class="pre">apt-get</span></tt> on Ubuntu, <tt class="docutils literal"><span class="pre">yum</span></tt> on Fedora, <tt class="docutils literal"><span class="pre">rpm</span></tt> on Red Hat, etc. On the
Mac, we have had great success using software installed by <a class="reference external" href="http://www.macports.org">MacPorts</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We have had varying degrees of success using software installed by
package managers on various linux distributions and have had to resort to
building from source or using Sage, as described below.</p>
</div>
</li>
<li><p class="first"><em>Build each from source</em></p>
<p>An involved, but fairly straight forward process.</p>
</li>
<li><p class="first"><em>Use Python, NumPy, and SciPy installed with</em> <a class="reference external" href="http://www.sagemath.org/">Sage 4.7</a> <em>or newer</em></p>
<p>This option is foolproof, since Sage provides prebuilt binaries for the Mac
and many linux platforms. Their build process has also proven to be very
robust on many platforms.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some features are disabled when using Sage. In particular, callback
functions from Fortran subroutines to Python functions.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="installation">
<span id="id1"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Make sure that all <em>Payette</em> prerequisites are installed and working properly.</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">PAYETTE_ROOT</span></tt> to your <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt> environment variable</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">PAYETTE_ROOT/Toolset</span></tt> to your <tt class="docutils literal"><span class="pre">PATH</span></tt> environment variable</p>
</li>
<li><p class="first">(Optional) Set the <tt class="docutils literal"><span class="pre">PAYETTE_MTLDIR</span></tt> environment variable to point to
directories containing additional material models (user developed, not part
of <em>Payette</em>). See <a class="reference internal" href="installing_materials.html#installing"><em>Installing New Materials</em></a> for additional instructions on
installing user developed material models.</p>
</li>
<li><p class="first">(Optional) Set the <tt class="docutils literal"><span class="pre">PAYETTE_BENCHDIR</span></tt> environment variable to point to
directories containing additional tests.</p>
</li>
<li><p class="first">Change to <tt class="docutils literal"><span class="pre">PAYETTE_ROOT</span></tt> and run:</p>
<div class="highlight-rst"><div class="highlight"><pre>% PYTHON configure.py
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">PYTHON</span></tt> is the python interpreter that has <em>NumPy</em> and <em>SciPy</em>
installed. If using Sage, replace <tt class="docutils literal"><span class="pre">PYTHON</span></tt> with <tt class="docutils literal"><span class="pre">sage</span> <span class="pre">-python</span></tt>.</p>
<p><tt class="file docutils literal"><span class="pre">configure.py</span></tt> will write the <em>Payette</em> configuration file and the
following executable scripts:</p>
<div class="highlight-rst"><div class="highlight"><pre>PAYETTE_ROOT
  Payette_config.py
  Toolset/
    buildPayette
    cleanPayette
    runPayette
    testPayette
</pre></div>
</div>
</li>
<li><p class="first">execute:</p>
<div class="highlight-rst"><div class="highlight"><pre>% buildPayette
</pre></div>
</div>
<p>which will build the <em>Payette</em> material libraries and create a configuration
file of all built and installed materials in
<tt class="file docutils literal"><span class="pre">PAYETTE_ROOT/Source/Payette_installed_materials.py</span></tt></p>
</li>
</ol>
</div>
<div class="section" id="testing-the-installation">
<h2>Testing the Installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h2>
<p>To test <em>Payette</em> after installation, execute:</p>
<div class="highlight-rst"><div class="highlight"><pre>% testPayette -k regression -k fast
</pre></div>
</div>
<p>which will run the &#8220;fast&#8221; &#8220;regression&#8221; tests. To run the full test suite execute:</p>
<div class="highlight-rst"><div class="highlight"><pre>% testPayette -j4
</pre></div>
</div>
<p>Please note that running all of the tests takes several minutes.</p>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>callbacks</em></p>
<p>A callback function is a Python function accessible by Fortran subroutines
through a callback mechanism provided by <em>f2py</em>. The <em>NumPy</em> and <em>SciPy</em>
packages distributed by many of the different linux distributions package
managers have broken dependencies. In particular, callback functions seem to
be broken on many linux systems. The easy work around is to configure
<em>Payette</em> with <tt class="docutils literal"><span class="pre">--no-callback</span></tt>. Another work around is passing different
fortran compilers to configure.py (<tt class="docutils literal"><span class="pre">--f77exec=</span></tt> , <tt class="docutils literal"><span class="pre">--f90exec=</span></tt>) and seeing
if that makes a difference.</p>
</li>
<li><p class="first"><em>segfault</em></p>
<p>A segfault error is usually a result of a broken callback.  See 0) above.</p>
</li>
<li><p class="first"><em>Unable to build</em></p>
<p>Difficulty building <em>Payette</em> is usually the result of broken <em>NumPy</em> and
<em>SciPy</em> installations and the workaround involves reinstalling all software
packages from sourc. If you are uncomfortable installing these software
packages from source, consider using Sage to build and run <em>Payette</em>.</p>
</li>
</ol>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>If you experience problems when building/installing/testing <em>Payette</em>, you can
ask help from <a class="reference external" href="mailto:tjfulle&#37;&#52;&#48;sandia&#46;gov">Tim Fuller</a> or <a class="reference external" href="mailto:mswan&#37;&#52;&#48;sandia&#46;gov">Scot Swan</a>. Please include the following information in your message:</p>
<ol class="arabic">
<li><p class="first">Are you using Sage, or not</p>
</li>
<li><p class="first">Platform information OS, its distribution name and version information etc.:</p>
<div class="highlight-rst"><div class="highlight"><pre>% PYTHON -c &#39;import os,sys;print os.name,sys.platform&#39;
% uname -a
</pre></div>
</div>
</li>
<li><p class="first">Information about C,C++,Fortran compilers/linkers as reported by
the compilers when requesting their version information, e.g.,
the output of:</p>
<div class="highlight-rst"><div class="highlight"><pre>% gcc -v
% gfortran --version
</pre></div>
</div>
</li>
<li><p class="first">Python version:</p>
<div class="highlight-rst"><div class="highlight"><pre>% PYTHON -c &#39;import sys;print sys.version&#39;
</pre></div>
</div>
</li>
<li><p class="first"><em>NumPy</em> version:</p>
<div class="highlight-rst"><div class="highlight"><pre>% PYTHON -c &#39;import numpy;print numpy.__version__&#39;
</pre></div>
</div>
</li>
<li><p class="first"><em>SciPy</em> version:</p>
<div class="highlight-rst"><div class="highlight"><pre>% PYTHON -c &#39;import scipy;print scipy.__version__&#39;
</pre></div>
</div>
</li>
<li><p class="first">The contents of the <tt class="file docutils literal"><span class="pre">PAYETTE_ROOT/Payette_config.py</span></tt> file</p>
</li>
<li><p class="first">Feel free to add any other relevant information.</p>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Building <em>Payette</em></a><ul>
<li><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li><a class="reference internal" href="#required-software">Required Software</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#testing-the-installation">Testing the Installation</a></li>
<li><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="layout.html"
                        title="previous chapter">Developer Guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="running_payette.html"
                        title="next chapter">Running <em>Payette</em></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/Files/building.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="running_payette.html" title="Running Payette"
             >next</a> |</li>
        <li class="right" >
          <a href="layout.html" title="Developer Guide"
             >previous</a> |</li>
        <li><a href="../index.html">Payette 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Tim Fuller, Scot Swan.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>